/******************************************************************************
*  Filename:       rf_patch_rfe_tof.h
*  Revised:        $Date: 2019-04-29 17:29:16 +0200 (ma, 29 apr 2019) $
*  Revision:       $Revision: 19024 $
*
*  Description: RF core RFE patch for time of flight 2Mbps PHY for CC13x2 and CC26x2
*
*  Copyright (c) 2015-2019, Texas Instruments Incorporated
*  All rights reserved.
*
*  Redistribution and use in source and binary forms, with or without
*  modification, are permitted provided that the following conditions are met:
*
*  1) Redistributions of source code must retain the above copyright notice,
*     this list of conditions and the following disclaimer.
*
*  2) Redistributions in binary form must reproduce the above copyright notice,
*     this list of conditions and the following disclaimer in the documentation
*     and/or other materials provided with the distribution.
*
*  3) Neither the name of the ORGANIZATION nor the names of its contributors may
*     be used to endorse or promote products derived from this software without
*     specific prior written permission.
*
*  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
*  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
*  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
*  ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
*  LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
*  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
*  SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
*  INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
*  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
*  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
*  POSSIBILITY OF SUCH DAMAGE.
*
******************************************************************************/


#ifndef _RF_PATCH_RFE_TOF_H
#define _RF_PATCH_RFE_TOF_H

#include <stdint.h>
#include "../inc/hw_types.h"

#ifndef RFE_PATCH_TYPE
#define RFE_PATCH_TYPE static const uint32_t
#endif

#ifndef PATCH_FUN_SPEC
#define PATCH_FUN_SPEC static inline
#endif

#ifndef RFC_RFERAM_BASE
#define RFC_RFERAM_BASE 0x2100C000
#endif

#ifndef RFE_PATCH_MODE
#define RFE_PATCH_MODE 0
#endif

RFE_PATCH_TYPE patchTofRfe[474] = { 
   0x00006194,
   0x004535aa,
   0x0421a355,
   0x1f40004c,
   0x0000003f,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x40004030,
   0x40034001,
   0x400f4007,
   0x40cf404f,
   0x43cf41cf,
   0x4fcf47cf,
   0x2fcf3fcf,
   0x0fcf1fcf,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x40004030,
   0x40034001,
   0x400f4007,
   0x40cf404f,
   0x6fcf7fcf,
   0x4fcf5fcf,
   0x2fcf3fcf,
   0x0fcf1fcf,
   0x00000000,
   0x00000000,
   0x9100c050,
   0xc0707000,
   0x70009100,
   0x00213182,
   0xb1109131,
   0x81017000,
   0xa100b101,
   0x91323182,
   0x9101b110,
   0x81411011,
   0x40772241,
   0x700006f1,
   0x9150c050,
   0xc0707000,
   0x70009150,
   0x00213182,
   0xb1609181,
   0x10257000,
   0x9100c050,
   0xc140c3f4,
   0x6f031420,
   0x04411031,
   0x22f082a0,
   0x26514094,
   0x3182c022,
   0x91310021,
   0x3963b110,
   0x04411031,
   0x3182c082,
   0x91310021,
   0x3963b110,
   0xc0a21031,
   0x00213182,
   0xb1109131,
   0x31151050,
   0x92551405,
   0x64677000,
   0x1031c2b2,
   0x31610631,
   0x646a02c1,
   0x1031c112,
   0x06713921,
   0x02e13151,
   0x7000646a,
   0x82b16464,
   0x39813181,
   0x646ac0e2,
   0xc1116467,
   0x646ac122,
   0x68c7c470,
   0xc0c2c111,
   0x64e0646a,
   0x700064f3,
   0x82b1647c,
   0x39813181,
   0x6482c182,
   0xc111647f,
   0x6482c0a2,
   0x68d9c470,
   0xc162c331,
   0x64e06482,
   0x700064f3,
   0xb054b050,
   0x80407100,
   0x44ed2240,
   0x40e02200,
   0x8081b060,
   0x44e01e11,
   0xa0547000,
   0x80f0b064,
   0x40e02200,
   0x12407000,
   0xb03290b0,
   0x395382a3,
   0x64ad3953,
   0x68fbc2f0,
   0xc1f18080,
   0xc1510410,
   0x41071c10,
   0xc2216467,
   0x646ac0c2,
   0x647f610b,
   0xc162c441,
   0xce306482,
   0x1280690c,
   0xb03290b0,
   0x64677000,
   0xc0c2c201,
   0x80a0646a,
   0x39403180,
   0xc1016918,
   0x646ac0c2,
   0xc122c101,
   0x82a3646a,
   0x12c064ad,
   0xb03290b0,
   0x647f7000,
   0xc162c401,
   0x80a06482,
   0x39403180,
   0xc301692c,
   0x6482c162,
   0xc0a2c101,
   0x82a36482,
   0x12c064ad,
   0xb03290b0,
   0x64677000,
   0xc081c272,
   0xc122646a,
   0x646ac111,
   0xc111c002,
   0xc062646a,
   0x646ac331,
   0xc111c362,
   0xc302646a,
   0x646ac111,
   0x395382a3,
   0xc3e264ad,
   0x2211646f,
   0xc242414f,
   0x646ac881,
   0xc111c252,
   0xc272646a,
   0x646acee1,
   0xc881c202,
   0xc202646a,
   0x646ac801,
   0x6963c170,
   0x64677000,
   0xc801c242,
   0xc252646a,
   0x646ac011,
   0xc0e1c272,
   0xc002646a,
   0x646ac101,
   0xc301c062,
   0xc122646a,
   0x646ac101,
   0xc101c362,
   0xc302646a,
   0x646ac101,
   0x64ad82a3,
   0x80817000,
   0x418f1e11,
   0xb054b050,
   0x80407100,
   0x41902240,
   0xb064a054,
   0x220180f1,
   0x70004584,
   0x41842200,
   0x6181b060,
   0x72057306,
   0x720e720b,
   0x7100b050,
   0xa050b060,
   0x80928081,
   0x45b32241,
   0xc1f18080,
   0x16300410,
   0x14011101,
   0x61c66c01,
   0x61c661c6,
   0x61c661c6,
   0x61e661c6,
   0x61e661c6,
   0x61c661c6,
   0x809161c6,
   0x0421c0f2,
   0x80823121,
   0x14122a42,
   0x11011632,
   0x6c011421,
   0x61c661cf,
   0x61c661cf,
   0x61c661c6,
   0x61c661c6,
   0x61c861c8,
   0x61cbb0b0,
   0x7306b0b1,
   0xb0307205,
   0x78206198,
   0x78427831,
   0x78547873,
   0x78667885,
   0x92719260,
   0x92939282,
   0x92b592a4,
   0xc01f91a6,
   0x3940924f,
   0x100106f0,
   0x14103110,
   0x61c89250,
   0xcff0b060,
   0x662f67ae,
   0xb0e16623,
   0xb060b050,
   0xb064b054,
   0x31828262,
   0x39423982,
   0xb0e16487,
   0x80407100,
   0x46202200,
   0x80f2b064,
   0x46122252,
   0x46092222,
   0x46102232,
   0x41f61e02,
   0x9342dfe0,
   0x651167ae,
   0x663961f6,
   0xb064663e,
   0x225080f0,
   0x61f64612,
   0x61f66634,
   0xb064a054,
   0xb060a050,
   0xb062a052,
   0xb063a053,
   0x65116565,
   0x67aecfd0,
   0x61c8720e,
   0x67aecfc0,
   0x64646212,
   0x318182b1,
   0xc0e23981,
   0x6467646a,
   0xc122c111,
   0x64f3646a,
   0x65397000,
   0x65117000,
   0x65657000,
   0xc1116467,
   0x646ac0c2,
   0x64677000,
   0xc0c2c101,
   0x7000646a,
   0x91b0c800,
   0xb05081a9,
   0x22418091,
   0xcfb046b1,
   0x826267ae,
   0x39823182,
   0x64873942,
   0x06f28262,
   0x311f102f,
   0x8266142f,
   0x465622d6,
   0x6257c140,
   0x1420c500,
   0x396d6f0d,
   0xc3f410de,
   0xc082044e,
   0x002e3182,
   0xc0a2396d,
   0x002d3182,
   0x398a826a,
   0x827006fa,
   0x39803180,
   0x180bc00b,
   0x18ac10bc,
   0x14398253,
   0x8260149b,
   0x100106f0,
   0x14103110,
   0x141081a1,
   0x22c6140c,
   0x82804708,
   0x06f03940,
   0xc0111002,
   0xc0103001,
   0x18021801,
   0x00213182,
   0x91e126c1,
   0xb013b003,
   0xb053b063,
   0x22018041,
   0x820446fe,
   0x82259214,
   0x4e9a1cb5,
   0x91b51895,
   0x224080f0,
   0x62af428c,
   0xb110913d,
   0xb110913e,
   0x220080e0,
   0x22e646a4,
   0xb0e042a4,
   0x91b51895,
   0x81a9925f,
   0x80f014f9,
   0x46fe2250,
   0x46af2240,
   0xc0b06391,
   0xb0636ab0,
   0x8280a052,
   0x0420c0f2,
   0xc0111002,
   0xc0103001,
   0x18021801,
   0x00213182,
   0x91e126c1,
   0xb01391e1,
   0xb063b003,
   0xb064b053,
   0xb062b054,
   0x92d1c001,
   0x710092e1,
   0x22018041,
   0xb06346fe,
   0x80f2b064,
   0x42fe2222,
   0x46df2272,
   0x92118201,
   0x18918221,
   0xb03191b1,
   0x42fe2222,
   0x710062cb,
   0x22218041,
   0x820142df,
   0x1e0082e0,
   0x92e146e9,
   0x7100b063,
   0x22218041,
   0x820142e9,
   0x1e0082d0,
   0x92d146d6,
   0x62cbb063,
   0xa0e0676c,
   0x825581a9,
   0xc0801459,
   0xb0637100,
   0x628c6afa,
   0xb0e6720e,
   0xa053a052,
   0x81b28251,
   0x3d823182,
   0x7000a003,
   0x39478287,
   0x82803987,
   0x06f03980,
   0xc0111002,
   0xc0103001,
   0x18021801,
   0x00213182,
   0x91d126c1,
   0xb012b002,
   0x39408280,
   0x100206f0,
   0x3001c011,
   0x1801c010,
   0x31821802,
   0x26c10021,
   0xb00391e1,
   0xb063b013,
   0x7100b053,
   0xb062a053,
   0x8041b052,
   0x46fe2201,
   0x921481f4,
   0x82048225,
   0x4f3e1cb5,
   0x91b51895,
   0x224080f0,
   0x62af432f,
   0x92148204,
   0x10408224,
   0x91b01890,
   0x1c751845,
   0x80f04f4b,
   0x432f2240,
   0x913d62af,
   0x913eb110,
   0x80e0b110,
   0x47552200,
   0x435522e6,
   0x91b5b0e0,
   0x81a9925f,
   0x80f014f9,
   0x46fe2250,
   0x46af2240,
   0x676c6373,
   0x81a9a0e0,
   0x14598255,
   0x7100c140,
   0x6b65b062,
   0x80a2632f,
   0x61c86487,
   0x39428262,
   0x608706f2,
   0x7100b050,
   0x829061c8,
   0x22018041,
   0x81f446fe,
   0x82259214,
   0x91b51895,
   0x224180f1,
   0x6b7446af,
   0x318181b1,
   0x80413d81,
   0x46fe2201,
   0x921481f4,
   0x1cc58225,
   0x18954b5f,
   0x80f091b5,
   0x43802240,
   0xcfa062af,
   0x829067ae,
   0x22018041,
   0x820446fe,
   0x82259214,
   0x91b51895,
   0x224180f1,
   0x6b9446af,
   0x22018041,
   0x820446fe,
   0x82259214,
   0x4af41cc5,
   0x91b51895,
   0x224080f0,
   0x62af43a0,
   0x83209330,
   0x47af2200,
   0x7000b310
};

PATCH_FUN_SPEC void rf_patch_rfe_tof(void)
{
#ifdef __PATCH_NO_UNROLLING
   uint32_t i;
   for (i = 0; i < 474; i++) {
      HWREG(RFC_RFERAM_BASE + 4 * i) = patchTofRfe[i];
   }
#else
   const uint32_t *pS = patchTofRfe;
   volatile unsigned long *pD = &HWREG(RFC_RFERAM_BASE);
   uint32_t t1, t2, t3, t4, t5, t6, t7, t8;
   uint32_t nIterations = 59;

   do {
      t1 = *pS++;
      t2 = *pS++;
      t3 = *pS++;
      t4 = *pS++;
      t5 = *pS++;
      t6 = *pS++;
      t7 = *pS++;
      t8 = *pS++;
      *pD++ = t1;
      *pD++ = t2;
      *pD++ = t3;
      *pD++ = t4;
      *pD++ = t5;
      *pD++ = t6;
      *pD++ = t7;
      *pD++ = t8;
   } while (--nIterations);

   t1 = *pS++;
   t2 = *pS++;
   *pD++ = t1;
   *pD++ = t2;
#endif
}

#endif
